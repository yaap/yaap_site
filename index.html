<!DOCTYPE html>
<html lang="en">
    <head>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const slides = document.querySelectorAll('.screenshot-slide');
                const leftBtn = document.querySelector('.carousel-arrow.left');
                const rightBtn = document.querySelector('.carousel-arrow.right');
                let current = 0;

                function showSlide(idx) {
                    slides.forEach((slide, i) => {
                        slide.classList.toggle('active', i === idx);
                    });
                }

                showSlide(current);

                rightBtn.addEventListener('click', () => {
                    current = (current + 1) % slides.length;
                    showSlide(current);
                });

                leftBtn.addEventListener('click', () => {
                    current = (current - 1 + slides.length) % slides.length;
                    showSlide(current);
                });

                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') {
                        leftBtn.click();
                    } else if (e.key === 'ArrowRight') {
                        rightBtn.click();
                    }
                });
            });

            document.addEventListener('DOMContentLoaded', function () {
                const starsEl = document.getElementById('github-stars');
                if (! starsEl) 
                    return;
                

                fetch('https://api.github.com/repos/yaap/manifest').then(response => {
                    if (!response.ok) 
                        throw new Error('Network response was not ok');
                    
                    return response.json();
                }).then(data => {
                    if (data && typeof data.stargazers_count === 'number') {
                        starsEl.textContent = data.stargazers_count;
                    } else {
                        starsEl.textContent = '‚Äî';
                    }
                }).catch(() => {
                    starsEl.textContent = '‚Äî';
                });
            });
        </script>
        <style>
            .screenshots {
                padding: 120px 0;
                background: var(--color-bg-1);
            }
            .screenshot-carousel {
                position: relative;
                max-width: 700px;
                margin: 0 auto;
                height: 420px;
                overflow: hidden;
                border-radius: var(--radius-lg);
                box-shadow: var(--shadow-lg);
                background: var(--color-surface);
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .screenshot-track {
                position: relative;
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .screenshot-slide {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0;
                transform: scale(0.96) translateX(80px);
                transition: opacity 0.7s cubic-bezier(0.45,0.45,0.28,1), transform 0.7s cubic-bezier(0.45,0.45,0.28,1);
                pointer-events: none;
            }
            .screenshot-slide.active {
                opacity: 1;
                transform: scale(1) translateX(0px);
                pointer-events: auto;
                z-index: 10;
            }
            .screenshot-slide img {
                max-width: 95%;
                max-height: 95%;
                border-radius: var(--radius-md);
                box-shadow: 0 5px 40px rgba(0, 0, 0, 0.12);
            }
            .carousel-arrow {
                background: var(--color-primary);
                color: var(--color-white);
                border: none;
                border-radius: var(--radius-lg);
                width: 48px;
                height: 48px;
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
                z-index: 20;
                cursor: pointer;
                transition: background 0.2s;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.07);
            }
            .carousel-arrow:hover {
                background: var(--color-primary-hover);
            }
            .carousel-arrow.left {
                margin-right: 16px;
            }
            .carousel-arrow.right {
                margin-left: 16px;
            }
            @media(max-width: 768px) {
                .screenshot-carousel {
                    height: 220px;
                }
                .carousel-arrow {
                    width: 38px;
                    height: 38px;
                    font-size: 1.5rem;
                }
            }
        </style>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>YAAP - Yet Another AOSP Project</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
        <link rel="stylesheet" href="/style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    </head>
    <body>
        <header class="header">
            <nav class="nav container">
                <div class="nav__brand">
                    <h2 class="nav__logo">
                       <a href="/"><img src="/assets/yaaplogo.svg" alt="YAAP" class="logo-yaap" width="220" height="auto"></a>
                    </h2>
                </div>
                <div class="nav__menu" id="nav-menu">
                    <a href="/#home" class="nav__link">Home</a>
                    <a href="/#screenshots" class="nav__link">Screenshots</a>
                    <a href="/#downloads" class="nav__link">Download</a>
                    <a href="/#community" class="nav__link">Community</a>
                    <a href="/#contribute" class="nav__link">Contribute</a>
                </div>
                <button class="nav__toggle" id="nav-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </nav>
        </header>

        <main>
            <section id="home" class="hero">
                <div class="hero__content container">
                    <div class="hero__text">
                        <h1 class="hero__title">
                           <center><img src="/assets/yaaplogo.svg" alt="YAAP" width="280px" class="header-yaap" height="auto"></center>
                        </h1>
                        <h2 class="hero__subtitle">Yet Another AOSP Project</h2>
                        <div class="hero__buttons">
                            <a href="#downloads" class="btn btn--primary btn--lg">Download Now</a>
                        </div>
                    </div>
                    </div>
            </section>

            <section class="screenshots" id="screenshots">
                    <div class="container">
                <center><h2 class="section-title">Screenshots</h2></center>
                <div class="screenshot-carousel">
                    <button class="carousel-arrow left" aria-label="Previous Screenshot">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M12 5L7 10L12 15" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <div class="screenshot-track">
                        <div class="screenshot-slide active">
                            <img src="ss/0.webp" alt="Screenshot 1">
                        </div>
                        <div class="screenshot-slide active">
                            <img src="ss/1.webp" alt="Screenshot 1">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/2.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/3.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/4.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/5.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/6.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/7.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/8.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/9.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/10.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/11.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/12.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/13.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/14.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/15.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/16.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/17.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/18.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/19.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/20.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/21.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/22.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/23.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/24.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/25.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/26.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/27.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/28.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/29.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/30.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/31.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/32.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/33.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/34.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/35.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/36.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/37.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/38.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/39.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/40.webp" alt="Screenshot 2">
                        </div>
                        <div class="screenshot-slide">
                            <img src="ss/41.webp" alt="Screenshot 2">
                        </div>
                    </div>
                    <button class="carousel-arrow right" aria-label="Next Screenshot">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M8 5L13 10L8 15" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>

                </div>
                </div>
            </section>

            <section id="downloads" class="downloads">
            <div class="container">
                <center><h2 class="section-title">Supported Devices</h2></center>
                <div class="device-filters"></div>
                <div class="devices__grid"></div>
            </div>
        </section>

            <section id="community" class="community">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Join Our Community</h2>
                        <p class="section-subtitle">Connect with fellow YAAP users and contributors</p>
                    </div>

                    <div class="community-card">
                            <div class="community-card__icon">üí¨</div>
                            <h3 class="community-card__title">Telegram Channel</h3>
                            <p class="community-card__description">Get notifications about new releases.</p>
                            <a href="https://t.me/yaapupdates" target="_blank" class="btn btn--primary">Join Channel</a>
                        </div>

                    <div class="community__grid">
                        <div class="community-card">
                            <div class="community-card__icon">üí¨</div>
                            <h3 class="community-card__title">Telegram Group</h3>
                            <p class="community-card__description">Get support and discuss about YAAP with users and devs.</p>
                            <a href="https://t.me/yaapcommon" target="_blank" class="btn btn--primary">Join Chat</a>
                        </div>

                        <div class="community-card">
                            <div class="community-card__icon">üíª</div>
                            <h3 class="community-card__title">GitHub</h3>
                            <p class="community-card__description">Contribute to development and access source code</p>
                            <a href="https://github.com/YAAP" target="_blank" class="btn btn--primary">View Repository</a>
                        </div>
                    </div>
                </div>
            </section>

            <section id="contribute" class="contribute">
                <div class="container">
                    <div class="section-header">
                        <h2 class="section-title">Contribute to YAAP</h2>
                        <p class="section-subtitle">Help us make YAAP better for everyone</p>
                    </div>

                    <div class="contribute__content">
                        <div class="contribute-ways">
                            <div class="contribute-card">
                                <h3 class="contribute-card__title">üë®‚Äçüíª Development</h3>
                                <p class="contribute-card__description">Submit patches, fix bugs or help improve our things further</p>
                            </div>

                            <div class="contribute-card">
                                <h3 class="contribute-card__title">üß™ Testing</h3>
                                <p class="contribute-card__description">Test builds on your device and report issues to help us improve stability</p>
                            </div>

                            <div class="contribute-card">
                                <h3 class="contribute-card__title">üì± Translate</h3>
                                <p class="contribute-card__description">Help translate YAAP to your native language</p>
                            </div>

                        </div>

                        <div class="contribute-cta">
                            <h3>Ready to contribute?</h3>
                            <p>Visit our GitHub organization to get started</p>
                            <a href="https://github.com/YAAP" target="_blank" class="btn btn--primary btn--lg">Start Contributing</a>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <div class="container">
                <div class="footer__bottom">
                    <p>&copy; 2025 YAAP Team. All rights reserved.</p>
                    <p>YAAP is not affiliated with Google or Android.</p>
                    <a href="https://github.com/yaap/yaap_site">Site source code</a>
                </div>
            </div>
        </footer>

<script>
async function loadDevices() {
    const container = document.querySelector(".devices__grid");
    const filterContainer = document.querySelector(".device-filters");

    container.innerHTML = "Loading devices...";

    try {
        // Get folder list from GitHub repo
        const repoContents = await fetch("https://api.github.com/repos/yaap/device-info/contents").then(r => r.json());
        const deviceFolders = repoContents.filter(item => item.type === "dir");

        // Fetch each device JSON
        const devicesData = await Promise.all(deviceFolders.map(async folder => {
            try {
                const infoUrl = `https://raw.githubusercontent.com/yaap/device-info/master/${folder.name}/${folder.name}.json`;
                const info = await fetch(infoUrl).then(r => r.json());
                const brand = info.name ? info.name.split(" ")[0] : "Unknown";
                return { codename: folder.name, brand, ...info };
            } catch (err) {
                console.error("Failed to load device", folder.name, err);
                return null;
            }
        }));

        const devices = devicesData.filter(Boolean);

        // Group by brand
        const brandMap = {};
        devices.forEach(device => {
            if (!brandMap[device.brand]) {
                brandMap[device.brand] = [];
            }
            brandMap[device.brand].push(device);
        });

        // sort each brand by device name
        Object.keys(brandMap).forEach(b => {
            brandMap[b].sort((a, b) => {
                const nameA = a.name || "";
                const nameB = b.name || "";
                return nameA.localeCompare(nameB);
            });
        });

        // Sort brands alphabetically
        const sortedBrands = Object.keys(brandMap).sort();

        // Render filter buttons
        filterContainer.innerHTML = `<button class="filter-btn filter-btn--active" data-brand="all">All Brands</button>` +
            sortedBrands.map(b => `<button class="filter-btn" data-brand="${b}">${b}</button>`).join("");

        // Render all devices grouped by brand
        function renderDevices(brand = "all") {
            let html = "";
            sortedBrands.forEach(b => {
                if (brand === "all" || brand === b) {
                    html += `<div class="device-brand" data-brand="${b}">
                                <h3 class="device-brand__title">${b}</h3>
                                <div class="device-brand__models">
                                    ${brandMap[b].map(d => `
                                        <div class="device-card">
                                            <h4 class="device-card__name">${d.name}</h4>
                                            <a href="device.html?codename=${d.codename}" class="btn btn--primary btn--sm">Download</a>
                                        </div>
                                    `).join("")}
                                </div>
                             </div>`;
                }
            });
            container.innerHTML = html || "<p>No devices found.</p>";
        }

        renderDevices();

        // Filter handling
        filterContainer.addEventListener("click", e => {
            if (e.target.classList.contains("filter-btn")) {
                document.querySelectorAll(".filter-btn").forEach(btn => btn.classList.remove("filter-btn--active"));
                e.target.classList.add("filter-btn--active");
                renderDevices(e.target.dataset.brand);
            }
        });

    } catch (err) {
        console.error(err);
        container.innerHTML = "<p>Failed to load devices.</p>";
    }
}

document.addEventListener("DOMContentLoaded", loadDevices);

</script>
<script src="/app.js"></script>
    </body>
</html>
